function t(t,a,r,e){var s=$(".d-toast").length,i="";switch(t){case"success":i=" d-toast-success";break;case"error":i=" d-toast-error";break;case"notify":i=" d-toast-notify";break;case"warning":i=" d-toast-warning"}var o="";o+='<div id="toast_'+s+'" class="d-toast fadeInTop'+i+'">',o+="<strong>"+a+"</strong>",o+=" "+r+".",o+="</div>",$("body").append(o),$("#toast_"+s).show();var c=80+50*s;$("#toast_"+s).css("top",c),setTimeout(function(){$("#toast_"+s).removeClass("fadeInTop"),$("#toast_"+s).addClass("fadeOutTop"),setTimeout(function(){$("#toast_"+s).remove()},500)},1e3*e)}function a(t){var a=t.value,e="";for(i=0;i<a.length;i++)" "!=a.charAt(i)&&"."!=a.charAt(i)&&"-"!=a.charAt(i)&&(e+=a.charAt(i));if(a=e,largo=a.length,""!=a&&largo<8)return!1;for(i=0;i<largo;i++)if("0"!=a.charAt(i)&&"1"!=a.charAt(i)&&"2"!=a.charAt(i)&&"3"!=a.charAt(i)&&"4"!=a.charAt(i)&&"5"!=a.charAt(i)&&"6"!=a.charAt(i)&&"7"!=a.charAt(i)&&"8"!=a.charAt(i)&&"9"!=a.charAt(i)&&"k"!=a.charAt(i)&&"K"!=a.charAt(i))return t.focus(),t.select(),!1;var s="";for(i=largo-1,j=0;i>=0;i--,j++)s+=a.charAt(i);var o="";for(o+=s.charAt(0),o+="-",cnt=0,i=1,j=2;i<largo;i++,j++)3==cnt?(o+=".",j++,o+=s.charAt(i),cnt=1):(o+=s.charAt(i),cnt++);for(s="",i=o.length-1,j=0;i>=0;i--,j++)s+=o.charAt(i);return t.value=s.toUpperCase(),r(t,a)}function r(t,a){"-"==t.value&&(t.value="");var r,e,s;if((r=a.length)<8&&r>3)return!1;if(e=r>2?a.substring(0,r-1):a.charAt(0),s=a.charAt(r-1),null==e||null==s)return!0;if(""==e||""==s)return!0;var o="0";for(suma=0,mul=2,i=e.length-1;i>=0;i--)suma+=e.charAt(i)*mul,7==mul?mul=2:mul++;return res=suma%11,1==res?o="k":0==res?o="0":(dvi=11-res,o=dvi+""),o==s.toLowerCase()}function e(t){if(""!=t){for(var a,r,e,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i="",o=0,c=t.length;o<c;){if(a=255&t.charCodeAt(o++),o==c){i+=s.charAt(a>>2),i+=s.charAt((3&a)<<4),i+="==";break}if(r=t.charCodeAt(o++),o==c){i+=s.charAt(a>>2),i+=s.charAt((3&a)<<4|(240&r)>>4),i+=s.charAt((15&r)<<2),i+="=";break}e=t.charCodeAt(o++),i+=s.charAt(a>>2),i+=s.charAt((3&a)<<4|(240&r)>>4),i+=s.charAt((15&r)<<2|(192&e)>>6),i+=s.charAt(63&e)}return i}return!1}$(document).ready(function(){function r(){if(a($("#rut-user")[0])){if(""!=$("#pass-user").val())r=e($("#pass-user").val());else var r="";var s={rut:$("#rut-user").val(),pass:r};$.ajax({type:"POST",url:"../api/login",data:s,dataType:"json",beforeSend:function(){$("#floating-loader").fadeIn(200)},complete:function(){$("#floating-loader").fadeOut(200)},success:function(a){"success"==a.status?($(document).off("keypress"),t(a.status,a.message.title,a.message.body,a.message.timeout),window.location.href="../admin/"):t(a.status,a.message.title,a.message.body,a.message.timeout)}})}else t("error","","El rut no es v√°lido",2)}$("#rut-user").focus(),$(document).keypress(function(t){13==(t.keyCode||t.which)&&r()}),$("#login-button").on("click",r)});